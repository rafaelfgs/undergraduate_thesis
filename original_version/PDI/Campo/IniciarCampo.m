%% Determina a posição do campo e transforma de pixels para milímetros

if ~exist('Relacao','var')
    
    % Salva um padrão qualquer de pixels
    Relacao.Pixels = [    047 023;        162 016;        278 023;     ...
                                      100 054;224 054;                 ...
                          040 064;064 063;        260 063;283 064;     ...
                      023 089;                                300 089; ...
                                      099 124;225 124;                 ...
                      023 155;                                300 154; ...
                          040 179;064 180;        260 180;283 179;     ...
                                      101 190;223 190;                 ...
                          047 221;        162 227;        277 221    ];
    
    % Pontos do campo em milímetros
    Relacao.Milimetros = [     -750 +650;          +000 +650;          +750 +650;      ...
                                              -375 +400;+375 +400;                     ...
                               -750 +350;-600 +350;          +600 +350;+750 +350;      ...
                          -850 +200;                                        +850  200; ...
                                              -375 +000;+375 +000;                     ...
                          -850 -200;                                         850 -200; ...
                               -750 -350;-600 -350;          +600 -350;+750 -350;      ...
                                              -375 -400;+375 -400;                     ...
                               -750 -650;          +000 -650;           750 -650     ];
    
    % Potências da matriz da posição (x,y) para a transformação polinomial de grau 4
    % Supondo u = 0 + x + y + xy + x2 + y2 + x2y + xy2 + x3 + y3 + x3y + x2y2 + xy3 + x4 + y4
    Relacao.Potencias = [0 1 0 1 2 0 2 1 3 0 3 2 1 4 0 ; 0 0 1 1 0 2 1 2 0 3 1 2 3 0 4];
    
end

% Chama a função para criar a tela do campo
CriarCampo

% Desabilita os botões de Parar a Câmera e de Definir o Campo
set(TelaPrincipal.Botao([1 6]),'enable','off')

% Determina se pode ou não habilitar o botão de Iniciar Jogo
if isrunning(Camera.Video) && exist('Calibracao','var') && exist('Constantes','var') && Partida.Comunicacao == 1 && Partida.Jogo == 0
    set(TelaPrincipal.Botao(4),'Enable','on')
end

% Chama a função para determinar a relação entre pixels e milímetros
RelacionarCampo

% Chama a função para exibir os pontos na tela
PlotarCampo